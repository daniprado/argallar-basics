#!/usr/bin/env zsh
set -o errexit

param="${1}"
cfg_color="${XDG_CONFIG_HOME}/color"

current="$(cat ${cfg_color})"
[[ "${current}" == "dark" ]] && expected="light" || expected="dark"
([[ "${param}" == "dark" ]] || [[ "${param}" == "light" ]]) && expected="${param}"

echo "${expected}" > "${cfg_color}"

apps=(
  "alacritty"
  "bpytop"
  "broot"
  "copyq"
  "gtk-4.0"
  "Kvantum"
  "qt6ct"
  "mako"
  "nvim"
  "sway"
  "swaylock"
  "ulauncher"
  "vivaldi"
  "waybar"
  "zsh"
)

for app in "${apps[@]}"; do
  ${XDG_CONFIG_HOME}/${app}/color.sh ${expected}
done

exit 0
